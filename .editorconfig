root = true

[*]
charset = utf-8
insert_final_newline = true
trim_trailing_whitespace = true

# IMPORTANT - marks Assets/Plugins/** as generated code.
# the linter doesn't run on their source code, and we don't get squiggles everywhere.
[Assets/Plugins/**]
generated_code = true


[*.cs]
# CSharpier config (also potentially used by other tools)
end_of_line = lf
indent_style = tab
indent_size = 4
max_line_length = 120

#
# CSHARPIER OVERRIDES
#

# See: https://csharpier.com/docs/IntegratingWithLinters
dotnet_diagnostic.IDE0055.severity = none
dotnet_diagnostic.SA1001.severity = none
dotnet_diagnostic.SA1002.severity = none
dotnet_diagnostic.SA1003.severity = none
dotnet_diagnostic.SA1007.severity = none
dotnet_diagnostic.SA1008.severity = none
dotnet_diagnostic.SA1010.severity = none
dotnet_diagnostic.SA1011.severity = none
dotnet_diagnostic.SA1012.severity = none
dotnet_diagnostic.SA1013.severity = none
dotnet_diagnostic.SA1014.severity = none
dotnet_diagnostic.SA1015.severity = none
dotnet_diagnostic.SA1016.severity = none
dotnet_diagnostic.SA1017.severity = none
dotnet_diagnostic.SA1018.severity = none
dotnet_diagnostic.SA1019.severity = none
dotnet_diagnostic.SA1020.severity = none
dotnet_diagnostic.SA1021.severity = none
dotnet_diagnostic.SA1022.severity = none
dotnet_diagnostic.SA1023.severity = none
dotnet_diagnostic.SA1024.severity = none
dotnet_diagnostic.SA1025.severity = none
dotnet_diagnostic.SA1026.severity = none
dotnet_diagnostic.SA1027.severity = none
dotnet_diagnostic.SA1028.severity = none
dotnet_diagnostic.SA1102.severity = none
dotnet_diagnostic.SA1103.severity = none
dotnet_diagnostic.SA1104.severity = none
dotnet_diagnostic.SA1105.severity = none
dotnet_diagnostic.SA1107.severity = none
dotnet_diagnostic.SA1110.severity = none
dotnet_diagnostic.SA1112.severity = none
dotnet_diagnostic.SA1113.severity = none
dotnet_diagnostic.SA1114.severity = none
dotnet_diagnostic.SA1115.severity = none
dotnet_diagnostic.SA1116.severity = none
dotnet_diagnostic.SA1117.severity = none
dotnet_diagnostic.SA1127.severity = none
dotnet_diagnostic.SA1128.severity = none
dotnet_diagnostic.SA1136.severity = none
dotnet_diagnostic.SA1505.severity = none
dotnet_diagnostic.SA1506.severity = none
dotnet_diagnostic.SA1507.severity = none
dotnet_diagnostic.SA1508.severity = none
dotnet_diagnostic.SA1509.severity = none
dotnet_diagnostic.SA1510.severity = none
dotnet_diagnostic.SA1511.severity = none
dotnet_diagnostic.SA1517.severity = none
dotnet_diagnostic.SA1518.severity = none

#
# NAMING CONVENTIONS
#

# private fields: _camelCase (Unity standard for serialized fields)
dotnet_naming_rule.private_fields_underscored.symbols = private_fields
dotnet_naming_rule.private_fields_underscored.style = underscore_camel_case
dotnet_naming_rule.private_fields_underscored.severity = error
dotnet_naming_symbols.private_fields.applicable_kinds = field
dotnet_naming_symbols.private_fields.applicable_accessibilities = private
dotnet_naming_style.underscore_camel_case.capitalization = camel_case
dotnet_naming_style.underscore_camel_case.required_prefix = _

# public/protected/internal fields: PascalCase
dotnet_naming_rule.public_fields_pascal.symbols = public_fields
dotnet_naming_rule.public_fields_pascal.style = pascal_case
dotnet_naming_rule.public_fields_pascal.severity = error
dotnet_naming_symbols.public_fields.applicable_kinds = field
dotnet_naming_symbols.public_fields.applicable_accessibilities = public, protected, internal
dotnet_naming_style.pascal_case.capitalization = pascal_case

# const fields: PascalCase
dotnet_naming_rule.const_fields_pascal.symbols = const_fields
dotnet_naming_rule.const_fields_pascal.style = pascal_case
dotnet_naming_rule.const_fields_pascal.severity = error
dotnet_naming_symbols.const_fields.applicable_kinds = field
dotnet_naming_symbols.const_fields.required_modifiers = const

# static readonly fields: PascalCase
dotnet_naming_rule.static_readonly_pascal.symbols = static_readonly_fields
dotnet_naming_rule.static_readonly_pascal.style = pascal_case
dotnet_naming_rule.static_readonly_pascal.severity = error
dotnet_naming_symbols.static_readonly_fields.applicable_kinds = field
dotnet_naming_symbols.static_readonly_fields.required_modifiers = static, readonly

# methods, properties, events: PascalCase
dotnet_naming_rule.methods_pascal.symbols = methods_properties_events
dotnet_naming_rule.methods_pascal.style = pascal_case
dotnet_naming_rule.methods_pascal.severity = error
dotnet_naming_symbols.methods_properties_events.applicable_kinds = method, property, event
dotnet_naming_symbols.methods_properties_events.applicable_accessibilities = *

# classes, structs, interfaces, enums, delegates: PascalCase
dotnet_naming_rule.types_pascal.symbols = types
dotnet_naming_rule.types_pascal.style = pascal_case
dotnet_naming_rule.types_pascal.severity = error
dotnet_naming_symbols.types.applicable_kinds = class, struct, interface, enum, delegate
dotnet_naming_symbols.types.applicable_accessibilities = *

# interfaces: IPascalCase
dotnet_naming_rule.interfaces_start_with_i.symbols = interfaces
dotnet_naming_rule.interfaces_start_with_i.style = interface_style
dotnet_naming_rule.interfaces_start_with_i.severity = error
dotnet_naming_symbols.interfaces.applicable_kinds = interface
dotnet_naming_style.interface_style.capitalization = pascal_case
dotnet_naming_style.interface_style.required_prefix = I

# local variables/parameters: camelCase
dotnet_naming_rule.locals_camel.symbols = locals_and_parameters
dotnet_naming_rule.locals_camel.style = camel_case
dotnet_naming_rule.locals_camel.severity = error
dotnet_naming_symbols.locals_and_parameters.applicable_kinds = parameter, local
dotnet_naming_symbols.locals_and_parameters.applicable_accessibilities = *
dotnet_naming_style.camel_case.capitalization = camel_case

# modifier ordering
csharp_preferred_modifier_order = public,private,protected,internal,static,extern,new,virtual,abstract,sealed,override,readonly,unsafe,volatile,async:error

#
# CODE STYLE RULES
#

# note: CSharpier enforces a lot of this already.
# we need to specify rules here so codegen/refactorings write correct code too.

csharp_prefer_braces = true:error

# 'this.' qualifier rules
dotnet_style_qualification_for_field = false:error
dotnet_style_qualification_for_property = false:error
dotnet_style_qualification_for_method = false:error
dotnet_style_qualification_for_event = false:error

# use 'int' and not 'Int32'
dotnet_style_predefined_type_for_locals_parameters_members = true:error
dotnet_style_predefined_type_for_member_access = true:error

# parentheses
dotnet_style_parentheses_in_arithmetic_binary_operators = always_for_clarity:error
dotnet_style_parentheses_in_relational_binary_operators = always_for_clarity:error
dotnet_style_parentheses_in_other_binary_operators = always_for_clarity:error
dotnet_style_parentheses_in_other_operators = never_if_unnecessary:error

# expressions
dotnet_style_prefer_auto_properties = true:error
dotnet_style_prefer_conditional_expression_over_return = false:silent
dotnet_style_prefer_inferred_tuple_names = true:error
dotnet_style_prefer_inferred_anonymous_type_member_names = true:error
dotnet_style_prefer_compound_assignment = true:error
dotnet_style_prefer_simplified_interpolation = true:error
dotnet_style_prefer_simplified_boolean_expressions = true:error

# null checking
csharp_style_throw_expression = true:error
csharp_style_prefer_null_check_over_type_check = true:error
dotnet_style_coalesce_expression = true:error
dotnet_style_null_propagation = true:error
csharp_style_conditional_delegate_call = true:error

# pattern matching
csharp_style_pattern_matching_over_is_with_cast_check = true:error
csharp_style_pattern_matching_over_as_with_null_check = true:error
csharp_style_prefer_switch_expression = true:error
csharp_style_prefer_pattern_matching = true:error
csharp_style_prefer_not_pattern = true:error
csharp_style_prefer_extended_property_pattern = true:error

# var preferences
csharp_style_var_for_built_in_types = false:error
csharp_style_var_when_type_is_apparent = true:error
csharp_style_var_elsewhere = false:error

# expression-bodied members (allow but don't require)
csharp_style_expression_bodied_methods = false:silent
csharp_style_expression_bodied_constructors = false:silent
csharp_style_expression_bodied_operators = false:silent
csharp_style_expression_bodied_properties = true:silent
csharp_style_expression_bodied_indexers = true:silent
csharp_style_expression_bodied_accessors = true:silent
csharp_style_expression_bodied_lambdas = true:silent
csharp_style_expression_bodied_local_functions = false:silent

# inline variable declarations
csharp_style_inlined_variable_declaration = true:error

# code block preferences
csharp_prefer_simple_using_statement = true:error

# using directives
dotnet_sort_system_directives_first = true
dotnet_separate_import_directive_groups = false
csharp_using_directive_placement = outside_namespace:error

#
# CODE QUALITY
#

# no unnecessary code
dotnet_diagnostic.IDE0001.severity = error  # Simplify names
dotnet_diagnostic.IDE0002.severity = error  # Simplify member access
dotnet_diagnostic.IDE0004.severity = error  # Remove unnecessary cast
dotnet_diagnostic.IDE0005.severity = error  # Remove unnecessary imports
dotnet_diagnostic.IDE0035.severity = error  # Remove unreachable code
dotnet_diagnostic.IDE0051.severity = warning  # Unused private members (warning for Unity messages)
dotnet_diagnostic.IDE0052.severity = warning  # Unread private members
dotnet_diagnostic.IDE0080.severity = error  # Remove unnecessary suppression operator

# modifier consistency
dotnet_diagnostic.IDE0036.severity = error  # Order modifiers
dotnet_diagnostic.IDE0040.severity = error  # Add accessibility modifiers
dotnet_diagnostic.IDE0044.severity = error  # Add readonly modifier

# expression/declaration preferences
dotnet_diagnostic.IDE0017.severity = error  # Use object initializers
dotnet_diagnostic.IDE0028.severity = error  # Use collection initializers
dotnet_diagnostic.IDE0032.severity = none  # Use auto property
dotnet_diagnostic.IDE0033.severity = error  # Use explicitly provided tuple name
dotnet_diagnostic.IDE0034.severity = error  # Simplify 'default' expression

#
# UNITY-SPECIFIC OVERRIDES
#

# public fields OK (Unity serialization)
dotnet_diagnostic.CA1051.severity = none

# ConfigureAwait not needed in Unity
dotnet_diagnostic.CA2007.severity = none

# disable localization rules (oops)
dotnet_diagnostic.CA1303.severity = none
dotnet_diagnostic.CA1304.severity = none
dotnet_diagnostic.CA1305.severity = none
dotnet_diagnostic.CA1307.severity = none
dotnet_diagnostic.CA1311.severity = none

# allow underscores in identifiers (Unity naming)
dotnet_diagnostic.CA1707.severity = none

# don't require sealed classes (Unity MonoBehaviours can't be sealed)
dotnet_diagnostic.CA1852.severity = none

#
# PERFORMANCE / BUGS
#

# allocation avoidance
dotnet_diagnostic.CA1825.severity = error  # Avoid zero-length array allocations (use Array.Empty<T>())
dotnet_diagnostic.CA1826.severity = error  # Use property instead of Linq Enumerable method
dotnet_diagnostic.CA1827.severity = error  # Do not use Count() when Any() can be used
dotnet_diagnostic.CA1829.severity = error  # Use Length/Count property instead of Count() method
dotnet_diagnostic.CA1830.severity = error  # Prefer strongly-typed Append on StringBuilder
dotnet_diagnostic.CA1831.severity = warning  # Use AsSpan instead of Range-based indexers
dotnet_diagnostic.CA1832.severity = warning  # Use AsSpan or AsMemory instead of Range-based indexers
dotnet_diagnostic.CA1833.severity = warning  # Use AsSpan or AsMemory instead of Range-based indexers
dotnet_diagnostic.CA1834.severity = error  # Use StringBuilder.Append(char) for single character strings
dotnet_diagnostic.CA1835.severity = warning  # Prefer memory-based overloads of ReadAsync/WriteAsync
dotnet_diagnostic.CA1836.severity = error  # Prefer IsEmpty over Count when available
dotnet_diagnostic.CA1844.severity = warning  # Provide memory-based overrides of async methods
dotnet_diagnostic.CA1845.severity = error  # Use span-based 'string.Concat'
dotnet_diagnostic.CA1846.severity = error  # Prefer AsSpan over Substring
dotnet_diagnostic.CA1847.severity = error  # Use string.Contains(char) instead of string.Contains(string)
dotnet_diagnostic.CA1851.severity = error  # Possible multiple enumerations of IEnumerable collection
dotnet_diagnostic.CA1854.severity = error  # Prefer the IDictionary.TryGetValue(TKey, out TValue) method
dotnet_diagnostic.CA1855.severity = error  # Use Span<T>.Clear() instead of Span<T>.Fill()

# bug avoidance
dotnet_diagnostic.CA1508.severity = warning  # Avoid dead conditional code
dotnet_diagnostic.CA1510.severity = error  # Use ArgumentNullException throw helper
dotnet_diagnostic.CA1511.severity = error  # Use ArgumentException throw helper
dotnet_diagnostic.CA1512.severity = error  # Use ArgumentOutOfRangeException throw helper
dotnet_diagnostic.CA1513.severity = error  # Use ObjectDisposedException throw helper
dotnet_diagnostic.CA1806.severity = error  # Do not ignore method results
dotnet_diagnostic.CA1816.severity = warning  # Dispose methods should call SuppressFinalize
dotnet_diagnostic.CA1820.severity = error  # Test for empty strings using string length
dotnet_diagnostic.CA1821.severity = error  # Remove empty Finalizers
dotnet_diagnostic.CA1822.severity = suggestion  # Mark members as static (too noisy for Unity)
dotnet_diagnostic.CA1824.severity = warning  # Mark assemblies with NeutralResourcesLanguageAttribute
dotnet_diagnostic.CA1828.severity = error  # Do not use CountAsync() or LongCountAsync() when AnyAsync() can be used
dotnet_diagnostic.CA1839.severity = error  # Use 'Environment.ProcessPath'
dotnet_diagnostic.CA1840.severity = error  # Use 'Environment.CurrentManagedThreadId'
dotnet_diagnostic.CA1841.severity = error  # Prefer Dictionary.Contains methods
dotnet_diagnostic.CA1842.severity = error  # Do not use 'WhenAll' with a single task
dotnet_diagnostic.CA1843.severity = error  # Do not use 'WaitAll' with a single task
dotnet_diagnostic.CA1849.severity = error  # Call async methods when in an async method
dotnet_diagnostic.CA1850.severity = warning  # Prefer static 'HashData' method over 'ComputeHash'

# API misuse
dotnet_diagnostic.CA2008.severity = warning  # Do not create tasks without passing a TaskScheduler
dotnet_diagnostic.CA2012.severity = error  # Use ValueTasks correctly
dotnet_diagnostic.CA2013.severity = error  # Do not use ReferenceEquals with value types
dotnet_diagnostic.CA2014.severity = error  # Do not use stackalloc in loops
dotnet_diagnostic.CA2015.severity = error  # Do not define finalizers for types derived from MemoryManager<T>
dotnet_diagnostic.CA2016.severity = error  # Forward the 'CancellationToken' parameter
dotnet_diagnostic.CA2017.severity = error  # Parameter count mismatch
dotnet_diagnostic.CA2018.severity = error  # 'Buffer.BlockCopy' expects the number of bytes to be copied
dotnet_diagnostic.CA2019.severity = error  # Improper 'ThreadStatic' field initialization
dotnet_diagnostic.CA2200.severity = error  # Rethrow to preserve stack details
dotnet_diagnostic.CA2201.severity = warning  # Do not raise reserved exception types
dotnet_diagnostic.CA2208.severity = error  # Instantiate argument exceptions correctly
dotnet_diagnostic.CA2245.severity = error  # Do not assign a property to itself
dotnet_diagnostic.CA2246.severity = error  # Do not assign a symbol and its member in the same statement
dotnet_diagnostic.CA2249.severity = error  # Consider using 'string.Contains' instead of 'string.IndexOf'
dotnet_diagnostic.CA2251.severity = error  # Use 'string.Equals' over 'string.Compare'

#
# UNITY-SPECIFIC
#

# See: https://github.com/microsoft/Microsoft.Unity.Analyzers
dotnet_diagnostic.UNT0001.severity = warning # Empty Unity message (sometimes scaffolding/debugging)
dotnet_diagnostic.UNT0002.severity = error # Inefficient tag comparison (always use CompareTag)
dotnet_diagnostic.UNT0003.severity = error # Use generic GetComponent<T>() for type safety
dotnet_diagnostic.UNT0004.severity = error # Time.fixedDeltaTime in Update (objectively wrong)
dotnet_diagnostic.UNT0005.severity = error # Time.deltaTime in FixedUpdate (objectively wrong)
dotnet_diagnostic.UNT0006.severity = error # Incorrect message signature (will break at runtime)
dotnet_diagnostic.UNT0007.severity = error # Null coalescing on Unity objects (Unity's fake null breaks this)
dotnet_diagnostic.UNT0008.severity = error # Null propagation on Unity objects (Unity's fake null breaks this)
dotnet_diagnostic.UNT0009.severity = error # Missing static constructor with InitializeOnLoad (required for it to work)
dotnet_diagnostic.UNT0010.severity = error # MonoBehaviour with new (will crash)
dotnet_diagnostic.UNT0011.severity = error # ScriptableObject with new (will crash)
dotnet_diagnostic.UNT0012.severity = warning # Unused coroutine return (sometimes intentional fire-and-forget)
dotnet_diagnostic.UNT0013.severity = error # Invalid SerializeField (won't work as intended)
dotnet_diagnostic.UNT0014.severity = error # GetComponent wrong type (will always return null)
dotnet_diagnostic.UNT0015.severity = error # Incorrect InitializeOnLoadMethod signature (won't be called)
dotnet_diagnostic.UNT0016.severity = error # Unsafe method name (always use nameof() - one right way)
dotnet_diagnostic.UNT0017.severity = warning # SetPixels is slow (but sometimes necessary for the use case)
dotnet_diagnostic.UNT0018.severity = warning # Reflection in hot path (context-dependent)
dotnet_diagnostic.UNT0019.severity = error # GameObject.gameObject (redundant, no reason to do this)
dotnet_diagnostic.UNT0020.severity = error # MenuItem on non-static (won't work)
dotnet_diagnostic.UNT0021.severity = none # Unity Messages should be protected (micro-optimization) - DISABLED; just use private.
dotnet_diagnostic.UNT0022.severity = error # Inefficient transform setting (use SetLocalPositionAndRotation)
dotnet_diagnostic.UNT0023.severity = error # Coalescing assignment on Unity objects (same as UNT0007)
dotnet_diagnostic.UNT0024.severity = warning # Scalar vs vector calculations (performance suggestion)
dotnet_diagnostic.UNT0025.severity = warning # Input.GetKey with KeyCode (old vs new Input System - both valid)
dotnet_diagnostic.UNT0026.severity = error # GetComponent allocates (always use TryGetComponent - one right way)
dotnet_diagnostic.UNT0027.severity = error # Don't call PropertyDrawer.OnGUI (will break)
dotnet_diagnostic.UNT0028.severity = warning # NonReorderable attribute (editor-only quality of life)
dotnet_diagnostic.UNT0029.severity = error # Pattern matching with null on Unity objects (same as UNT0007/UNT0008)
dotnet_diagnostic.UNT0030.severity = error # Missing RequireComponent (prevents runtime errors)
dotnet_diagnostic.UNT0031.severity = error # Improper Destroy usage (Destroy vs DestroyImmediate context)
dotnet_diagnostic.UNT0032.severity = error # Inefficient transform setting (use SetPositionAndRotation)
